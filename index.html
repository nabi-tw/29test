<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>日本語単語カード</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['-apple-system', 'BlinkMacSystemFont', 'Segoe UI', 'Noto Sans JP', 'sans-serif'],
                    },
                }
            }
        }
    </script>
</head>
<body class="bg-gray-100 flex items-center justify-center min-h-screen p-4">

    <!-- Container for the app -->
    <div id="app" class="w-full max-w-xl bg-white rounded-3xl shadow-2xl p-6 md:p-8">
        
        <!-- App Title -->
        <h1 class="text-3xl md:text-4xl font-bold text-center text-gray-800 mb-6">日本語単語カード</h1>
        
        <!-- Score Display -->
        <div id="score-display" class="text-center text-gray-600 mb-4 text-lg transition-opacity duration-300">
            <span id="current-count" class="font-semibold text-blue-600">1</span> / <span id="total-count">0</span>
        </div>
        
        <!-- The Flashcard -->
        <div id="flashcard" class="bg-white border-2 border-gray-200 rounded-2xl shadow-md p-8 min-h-[250px] flex flex-col items-center justify-center text-center cursor-pointer transition-transform duration-300 ease-in-out hover:scale-105 hover:shadow-lg active:scale-100" onclick="showAnswer()">
            <div id="card-content" class="text-gray-800">
                <div id="japanese-word" class="text-4xl md:text-5xl font-bold mb-4"></div>
                <div id="english-meaning" class="text-xl md:text-2xl text-blue-600 opacity-0 transition-opacity duration-500"></div>
            </div>
        </div>
        
        <!-- Summary Screen (Initially Hidden) -->
        <div id="summary-screen" class="hidden text-center transition-opacity duration-300">
            <h2 class="text-2xl font-bold text-gray-800 mb-4">わからない単語リスト</h2>
            <div id="unknown-list" class="bg-gray-50 p-4 rounded-xl max-h-64 overflow-y-auto mb-4">
                <!-- Unknown words will be populated here -->
            </div>
            <button onclick="startUnknownWordsSession()" class="bg-blue-600 text-white font-bold py-3 px-6 rounded-xl shadow-lg hover:bg-blue-700 transition-colors duration-200">
                もう一度やり直す
            </button>
            <button onclick="resetApp()" class="mt-4 bg-gray-500 text-white font-bold py-3 px-6 rounded-xl shadow-lg hover:bg-gray-600 transition-colors duration-200">
                最初からやり直す
            </button>
        </div>

        <!-- Action Buttons -->
        <div id="controls-section" class="mt-8 flex flex-col md:flex-row gap-4 justify-center transition-opacity duration-300">
            <button onclick="previousCard()" class="flex-1 bg-gray-500 text-white font-bold py-3 px-6 rounded-xl shadow-lg hover:bg-gray-600 transition-colors duration-200">
                前へ
            </button>
            <button onclick="nextCard()" class="flex-1 bg-blue-600 text-white font-bold py-3 px-6 rounded-xl shadow-lg hover:bg-blue-700 transition-colors duration-200">
                次へ
            </button>
            <button onclick="shuffleCards()" class="flex-1 bg-green-600 text-white font-bold py-3 px-6 rounded-xl shadow-lg hover:bg-green-700 transition-colors duration-200">
                シャッフル
            </button>
        </div>
        
        <!-- Feedback Buttons -->
        <div id="feedback-section" class="mt-6 flex gap-4 justify-center transition-opacity duration-300">
            <button onclick="markAs('known')" class="flex-1 bg-lime-500 text-white font-bold py-2 px-4 rounded-xl shadow-md hover:bg-lime-600 transition-colors duration-200">
                わかった
            </button>
            <button onclick="markAs('unknown')" class="flex-1 bg-rose-500 text-white font-bold py-2 px-4 rounded-xl shadow-md hover:bg-rose-600 transition-colors duration-200">
                わからない
            </button>
        </div>
        
    </div>

    <script>
        // Array of vocabulary words with their Japanese and English meanings.
        const allWords = [
            { japanese: "あきます", answer: "開きます（ドア）開著" },
            { japanese: "しまります", answer: "閉まります（ドア）關著" },
            { japanese: "つきます", answer: "付きます（電気）開著" },
            { japanese: "きえます", answer: "消えます（電気）關著" },
            { japanese: "こわれます", answer: "壊れます（椅子）壞了" },
            { japanese: "われます", answer: "割れます（コップ）碎了" },
            { japanese: "おれます", answer: "折れます（木）折斷了" },
            { japanese: "やぶれます", answer: "破れます（紙）破了" },
            { japanese: "よごれます", answer: "汚れます（服）髒了" },
            { japanese: "つきます", answer: "付きます（ポケット）附有（口袋）" },
            { japanese: "はずれます", answer: "外れます（ボタン）掉了" },
            { japanese: "とまります", answer: "止まります（車）停了、停著（車）" },
            { japanese: "まちがえます", answer: "間違えます　弄錯" },
            { japanese: "おとします", answer: "落とします　落下、弄丟" },
            { japanese: "かかります", answer: "掛かります（鍵）上著（鎖）" },
            { japanese: "ふきます", answer: "拭きます　擦" },
            { japanese: "とりかえます", answer: "取り替えます　更換" },
            { japanese: "かたづけます", answer: "片付けます　收拾" },
            { japanese: "さら", answer: "皿　盤子、碟子" },
            { japanese: "ちゃわん", answer: "茶碗　飯碗、碗" },
            { japanese: "こっぷ", answer: "コップ　杯子" },
            { japanese: "がらす", answer: "ガラス　玻璃" },
            { japanese: "ふくろ", answer: "袋　袋子" },
            { japanese: "しょるい", answer: "書類　文件、資料" },
            { japanese: "えだ", answer: "枝　樹枝" },
            { japanese: "えきいん", answer: "駅員　站務員" },
            { japanese: "こうばん", answer: "交番　派出所" },
            { japanese: "すぴーち", answer: "スピーチ　演講（〜をします：演講）" },
            { japanese: "へんじ", answer: "返事　回信（〜をします：回話）" },
            { japanese: "おさきにどうぞ", answer: "お先にどうぞ。您先請。" },
            { japanese: "げんじものがたり", answer: "源氏物語　源氏物語（平安時代紫式部寫的小說）" },
            { japanese: "いまのでんしゃ", answer: "今の電車　剛才的電車" },
            { japanese: "わすれもの", answer: "忘れ物　遺失物品" },
            { japanese: "このくらい", answer: "このくらい　這樣大小的" },
            { japanese: "がわ", answer: "側　側" },
            { japanese: "ぽけっと", answer: "ポケット　口袋" },
            { japanese: "へん", answer: "辺　邊" },
            { japanese: "おぼえていません", answer: "覚えていません。不記得了。" },
            { japanese: "あみだな", answer: "網棚　行李網架" },
            { japanese: "たしか", answer: "確か　似乎是、大概是" },
            { japanese: "よかった", answer: "［ああ、］よかった。（啊，）太好了。（用於表示安心時）" },
            { japanese: "じしん", answer: "地震　地震" },
            { japanese: "かべ", answer: "壁　牆壁" },
            { japanese: "はり", answer: "針　（鐘錶的）指針" },
            { japanese: "さします", answer: "指します　指" },
            { japanese: "えきまえ", answer: "駅前　車站前" },
            { japanese: "たおれます", answer: "倒れます　倒、倒下來" },
            { japanese: "にし", answer: "西　西" },
            { japanese: "のほう", answer: "の方　〜方面、〜方" },
            { japanese: "もえます", answer: "燃えます　燃燒" },
            { japanese: "れぽーたー", answer: "レポーター　採訪記者" }
        ];

        let words = [...allWords];
        let unknownWords = [];
        let currentIndex = 0;
        let isAnswerShown = false;
        
        // DOM elements
        const japaneseWordEl = document.getElementById('japanese-word');
        const englishMeaningEl = document.getElementById('english-meaning');
        const currentCountEl = document.getElementById('current-count');
        const totalCountEl = document.getElementById('total-count');
        const flashcardEl = document.getElementById('flashcard');
        const summaryScreenEl = document.getElementById('summary-screen');
        const unknownListEl = document.getElementById('unknown-list');
        const scoreDisplayEl = document.getElementById('score-display');
        const controlsSectionEl = document.getElementById('controls-section');
        const feedbackSectionEl = document.getElementById('feedback-section');

        // Function to display the current card
        function displayCard() {
            if (words.length === 0) {
                // All cards have been reviewed, show the summary or completion message
                showSummary();
                return;
            }

            const currentWord = words[currentIndex];
            japaneseWordEl.textContent = currentWord.japanese;
            englishMeaningEl.textContent = currentWord.answer;
            englishMeaningEl.classList.add('opacity-0');
            isAnswerShown = false;
            
            currentCountEl.textContent = currentIndex + 1;
            totalCountEl.textContent = words.length;

            flashcardEl.classList.remove('hidden');
            scoreDisplayEl.classList.remove('hidden');
            controlsSectionEl.classList.remove('hidden');
            feedbackSectionEl.classList.remove('hidden');
            summaryScreenEl.classList.add('hidden');
        }

        // Function to show the answer
        function showAnswer() {
            if (!isAnswerShown && words.length > 0) {
                englishMeaningEl.classList.remove('opacity-0');
                isAnswerShown = true;
            }
        }
        
        // Function to navigate to the next card
        function nextCard() {
            currentIndex = (currentIndex + 1) % words.length;
            displayCard();
        }

        // Function to navigate to the previous card
        function previousCard() {
            currentIndex = (currentIndex - 1 + words.length) % words.length;
            displayCard();
        }

        // Function to shuffle the cards
        function shuffleCards() {
            words = [...allWords].sort(() => Math.random() - 0.5);
            unknownWords = [];
            currentIndex = 0;
            displayCard();
        }
        
        // Function to mark a card as known or unknown and move to the next
        function markAs(status) {
            if (words.length === 0) return;
            
            const currentWord = words[currentIndex];
            
            // If the word is unknown, add it to the unknownWords array
            if (status === 'unknown') {
                unknownWords.push(currentWord);
            }
            
            // Remove the current word and move to the next
            words.splice(currentIndex, 1);

            // If we are at the end, wrap around to the beginning
            if (currentIndex >= words.length) {
                currentIndex = 0;
            }
            
            // Display the new card
            displayCard();
        }
        
        // Function to show the summary screen
        function showSummary() {
            flashcardEl.classList.add('hidden');
            scoreDisplayEl.classList.add('hidden');
            controlsSectionEl.classList.add('hidden');
            feedbackSectionEl.classList.add('hidden');
            summaryScreenEl.classList.remove('hidden');
            
            unknownListEl.innerHTML = '';
            
            if (unknownWords.length > 0) {
                unknownWords.forEach(word => {
                    const div = document.createElement('div');
                    div.className = 'py-2 px-4 border-b border-gray-200 last:border-b-0';
                    div.innerHTML = `<p class="font-bold text-gray-800">${word.japanese}</p><p class="text-gray-600">${word.answer}</p>`;
                    unknownListEl.appendChild(div);
                });
            } else {
                unknownListEl.innerHTML = '<p class="text-gray-600 text-center">お疲れ様でした！すべての単語を覚えました。</p>';
                summaryScreenEl.querySelector('h2').textContent = "おめでとうございます！";
                summaryScreenEl.querySelector('button').classList.add('hidden');
            }
        }
        
        // Function to start a new session with only unknown words
        function startUnknownWordsSession() {
            words = [...unknownWords];
            unknownWords = [];
            currentIndex = 0;
            displayCard();
            summaryScreenEl.querySelector('h2').textContent = "わからない単語リスト";
            summaryScreenEl.querySelector('button').classList.remove('hidden');
        }

        // Function to reset the app to its initial state
        function resetApp() {
            words = [...allWords];
            unknownWords = [];
            currentIndex = 0;
            displayCard();
            summaryScreenEl.querySelector('h2').textContent = "わからない単語リスト";
            summaryScreenEl.querySelector('button').classList.remove('hidden');
        }

        // Initial display
        document.addEventListener('DOMContentLoaded', () => {
            displayCard();
        });
    </script>
</body>
</html>
